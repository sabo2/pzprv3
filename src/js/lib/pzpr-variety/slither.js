/*! @license pzpr.js v3.6.0-pre (c) 2009-2016 sabo2, MIT license
 *   https://bitbucket.org/sabo2/pzprv3 */
pzpr.classmgr.makeCustom(["slither"],{MouseEvent:{redline:!0,bgcolor:!0,mouseinput:function(){var a=this.puzzle;if(a.playmode){var b=!1;this.mousestart?b=!!a.getConfig("bgcolor")&&this.inputBGcolor0():this.mousemove&&(b=!!a.getConfig("bgcolor")&&this.inputData>=10),b?this.inputBGcolor():this.btn.Left?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&(this.prevPos.reset(),this.inputpeke()):this.btn.Right&&(this.mousestart||this.mousemove)&&this.inputpeke()}else a.editmode&&this.mousestart&&this.inputqnum()},inputBGcolor0:function(){return this.getpos(.25).oncell()},inputBGcolor:function(){var a=this.getcell();a.isnull||a===this.mouseCell||(null===this.inputData&&(this.btn.Left?0===a.qsub?this.inputData=11:1===a.qsub?this.inputData=12:this.inputData=10:0===a.qsub?this.inputData=12:1===a.qsub?this.inputData=10:this.inputData=11),a.setQsub(this.inputData-10),a.draw(),this.mouseCell=a)}},KeyEvent:{enablemake:!0},Cell:{maxnum:3,minnum:0,getdir4BorderLine1:function(){var a=this.adjborder,b=0;return a.top.isLine()&&b++,a.bottom.isLine()&&b++,a.left.isLine()&&b++,a.right.isLine()&&b++,b}},Board:{hasborder:2,borderAsLine:!0},LineGraph:{pointgroup:"cross",enabled:!0},Graphic:{irowake:!0,bgcellcolor_func:"qsub2",paint:function(){this.drawBGCells(),this.drawLines(),this.drawBaseMarks(),this.drawNumbers(),this.drawPekes(),this.drawTarget()},repaintParts:function(a){this.range.crosses=a.crossinside(),this.drawBaseMarks()}},Encode:{decodePzpr:function(a){this.decode4Cell()},encodePzpr:function(a){this.encode4Cell()},decodeKanpen:function(){this.puzzle.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.puzzle.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){1===this.filever?(this.decodeCellQnum(),this.decodeCellQsub(),this.decodeBorderLine()):0===this.filever&&(this.decodeCellQnum(),this.decodeBorderLine())},encodeData:function(){this.filever=1,this.encodeCellQnum(),this.encodeCellQsub(),this.encodeBorderLine()},kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeBorderLine()},kanpenSave:function(){this.encodeCellQnum_kanpen(),this.encodeBorderLine()},kanpenOpenXML:function(){this.PBOX_ADJUST=0,this.decodeCellQnum_XMLBoard_Brow(),this.PBOX_ADJUST=1,this.decodeBorderLine_slither_XMLAnswer()},kanpenSaveXML:function(){this.PBOX_ADJUST=0,this.encodeCellQnum_XMLBoard_Brow(),this.PBOX_ADJUST=1,this.encodeBorderLine_slither_XMLAnswer()},UNDECIDED_NUM_XML:5,PBOX_ADJUST:1,decodeBorderLine_slither_XMLAnswer:function(){this.decodeCellXMLArow(function(a,b){var c=0,d=a.relbd(0,1),e=a.relbd(1,0);"n"===b.charAt(0)?c=+b.substr(1):(b.match(/h/)&&(c+=1),b.match(/v/)&&(c+=2)),1&c&&(d.line=1),2&c&&(e.line=1),4&c&&(d.qsub=2),8&c&&(e.qsub=2)})},encodeBorderLine_slither_XMLAnswer:function(){this.encodeCellXMLArow(function(a){var b=0,c="",d=a.relbd(0,1),e=a.relbd(1,0);return 1===d.line&&(b+=1),1===e.line&&(b+=2),2===d.qsub&&(b+=4),2===e.qsub&&(b+=8),c=0===b?"s":1===b?"h":2===b?"v":3===b?"hv":"n"+b})}},AnsCheck:{checklist:["checkBranchLine","checkCrossLine","checkdir4BorderLine","checkOneLoop","checkDeadendLine+"],checkdir4BorderLine:function(){this.checkAllCell(function(a){return a.qnum>=0&&a.getdir4BorderLine1()!==a.qnum},"nmLineNe")}},FailCode:{nmLineNe:["数字の周りにある線の本数が違います。","The number is not equal to the number of lines around it."]}});